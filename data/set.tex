\chapter{集合}
\section{元素与集合}
\subsection{集合的概念}
虽然集合是一个原始的概念, 但对一个具体的集合而言, 很多情况下我们还是可以采用列举法或描述法给出它的一个准确而清晰的表示.

用描述法表示一个集合基于下面的概括原则:

概括原则 对任给的一个性质 $P$, 存在一个集合 $S$, 它的元素恰好是具有性质 $P$ 的所有对象, 即

$$
	S=\{x \mid P(x)\}
$$

其中 $P(x)$ 表示 “ $x$ 具有性质 $P "$.

由此,我们知道集合的元素是完全确定的, 同时它的元素之间具有互异性和无序性.

集合的元素个数为有限数的集合称为有限集, 元素个数为无限数的集合称为无限集. 如果有限集 $A$ 的元素个数为 $n$, 则称 $A$ 为 $n$ 元集, 记作 $|A|=n$. 空集不含任何元素.

\begin{example}
	设集合 $M=\left\{x \left\lvert\, \frac{a x-5}{x^{2}-a}<0\right., x \in \mathbf{R}\right\}$. 若 $3 \in M$, 且 $5 \notin M$, 求实数 $a$ 的取值范围.
\end{example}
\begin{solution}
	由 $3 \in M$, 得 $\frac{3 a-5}{3^{2}-a}<0$, 即

	\begin{gather*}
		\left(a-\frac{5}{3}\right)(a-9)>0, \\
		a<\frac{5}{3} \text { 或 } a>9 . \tag{1}
	\end{gather*}


	所以

	由 $5 \notin M$ 得, $\frac{5 a-5}{5^{2}-a} \geqslant 0$ 或 $5^{2}-a=0$, 所以

	\begin{equation*}
		1 \leqslant a \leqslant 25 \tag{2}
	\end{equation*}


	由 (1), (2) 得, $a \in\left[1, \frac{5}{3}\right) \cup(9,25]$.

	说明 $5 \notin M$ 隐含了条件 $5^{2}-a=0$, 这是容易被忽视的.
\end{solution}

\begin{example}
	设集合 $M=\left\{a \mid a=x^{2}-y^{2}, x, y \in \mathbf{Z}\right\}, n$ 为整数. 分别判断数 $4 n ,  4 n+1 ,  4 n+2 ,  4 n+3$ 与集合 $M$ 的关系.
\end{example}

\begin{analysis}
	当 $n=1$ 时, 易知 $4=2^{2}-0^{2}, 5=3^{2}-2^{2}, 7=4^{2}-3^{2}$; 而对任何整数 $x ,  y$, 由于 $x+y$ 与 $x-y$ 同奇偶, 故 $(x+y)(x-y) \neq 2 \times 3=6 \times$ $1=6$. 于是, 我们尝试将 $4 n ,  4 n+1 ,  4 n+3$ 分别表示成 $x^{2}-y^{2}$ 的形式, 并证明不存在 $x, y \in \mathbf{Z}$, 使 $4 n+2=x^{2}-y^{2}$.
\end{analysis}

\begin{solution}
	因为对任意的整数 $n$, 有

	\begin{gather*}
		4 n=(n+1)^{2}-(n-1)^{2}(n+1, n-1 \in \mathbf{Z}) \\
		4 n+1=(2 n+1)^{2}-(2 n)^{2}(2 n+1,2 n \in \mathbf{Z}) \\
		4 n+3=(2 n+2)^{2}-(2 n+1)^{2}(2 n+2,2 n+1 \in \mathbf{Z})
	\end{gather*}

	所以 $4 n, 4 n+1,4 n+3 \in M$.

	若 $4 n+2$ 是 $M$ 的元素, 则存在 $x, y \in \mathbf{Z}$ 满足 $4 n+2=x^{2}-y^{2}$. 注意到 $x+y$ 与 $x-y$ 奇偶性相同, 若同为奇数, 则 $4 n+2=x^{2}-y^{2}=(x+y)(x-$ $y)$ 不成立; 若同为偶数, 则 $(x+y)(x-y)$ 为 4 的倍数, 但 $4 n+2$ 不是 4 的倍数, 故 $4 n+2=x^{2}-y^{2}=(x+y)(x-y)$ 不成立. 所以 $4 n+2$ 不是 $M$ 的元素.

	说明 由概括原则我们知道, 判断一个对象 $x$ 是否为集合 $S$ 的元素, 等价于判断 $x$ 是否具有性质 $P$.
\end{solution}

\begin{example}
	设集合

	$$
		S=\left\{\left.\frac{m+n}{\sqrt{m^{2}+n^{2}}} \right\rvert\, m, n \in \mathbf{N}, m^{2}+n^{2} \neq 0\right\}
	$$

	证明: 对一切 $x, y \in S$, 且 $x<y$, 总存在 $z \in S$, 使得 $x<z<y$.
\end{example}

\begin{proof}
	因 $\left(\frac{m+n}{\sqrt{m^{2}+n^{2}}}\right)^{2}=1+2 \times \frac{m n}{m^{2}+n^{2}}$, 所以, 原命题等价于: 设

	$$
		S^{\prime}=\left\{\left.\frac{m n}{m^{2}+n^{2}} \right\rvert\, m, n \in \mathbf{N}\right\}
	$$

	则对一切 $x, y \in S^{\prime}$ 且 $x<y$, 总存在 $z \in S^{\prime}$ 使得 $x<z<y$.

	$$
		\text { 记 } x=\frac{m n}{m^{2}+n^{2}}, y=\frac{a b}{a^{2}+b^{2}}(x<y) \text {. 不妨设 } m \leqslant n, a \leqslant b \text {. }
	$$
	考虑函数 $f(x)=\frac{-x}{1+x^{2}}$. 易证, $f(x)$ 在 $[0,1]$ 上严格递增. 所以, 对所有 $c, d \in[0,1]$, 有

	$$
		\begin{gathered}
			f(c)<f(d) \Leftrightarrow c<d . \\
			\text { 又 } f\left(\frac{m}{n}\right)=\frac{m m}{m^{2}+n^{2}}<\frac{a b}{a^{2}+b^{2}}=f\left(\frac{a}{b}\right) \text {,则 } \frac{m}{n}<\frac{a}{b} \text {. }
		\end{gathered}
	$$

	因此, 可以选择有理数 $\frac{p}{q}(p, q \in \mathbf{N}, q \neq 0)$, 使得 $\frac{m}{n}<\frac{p}{q}<$ $\frac{a}{b}\left(\right.$ 如取 $\left.\frac{p}{q}=\frac{1}{2}\left(\frac{m}{n}+\frac{a}{b}\right)\right)$. 故

	$$
		f\left(\frac{m}{n}\right)<f\left(\frac{p}{q}\right)<f\left(\frac{a}{b}\right)
	$$

	令 $z=f\left(\frac{p}{q}\right)=\frac{p q}{p^{2}+q^{2}}$ 即可.
\end{proof}

\begin{note}
	上述解法用等价命题代替原命题, 避免了根式运算, 使解答过程变得简洁.
\end{note}

\subsection{集合与集合的关系}
在两个集合的关系中, 子集是一个重要的概念, 它的两个特例是真子集和集合相等. 从下面“充分必要条件”的角度来理解子集, 真子集和集合相等的概念无疑是十分有益的:

子集 : $A \subseteq B \Leftrightarrow$ 对任意 $x \in A$,恒有 $x \in B$;

真子集: $A \varsubsetneqq B \Leftrightarrow\left\{\begin{array}{l}A \subseteq B, \\ \text { 且存在 } x^{\prime} \in B, \text { 但 } x^{\prime} \notin A \text {; }\end{array}\right.$

集合相等: $A=B \Leftrightarrow A \subseteq B$, 且 $B \subseteq A$.

容易证明两个集合之间关系的如下性质:

\begin{enumerate}
  \item $\varnothing \subseteq A, \varnothing \varsubsetneqq A(A \neq \varnothing)$;
  \item $A \subseteq B, B \subseteq C \Rightarrow A \subseteq C$;
  \item $n$ 元集 $A$ 总共有 $2^{n}$ 个不同的子集.
\end{enumerate}
\begin{example}
若集合 $\{1,2, \cdots, 50\}$ 的子集中不包含形如 $\{x, 3 x\}$ 的子集, 则称该子集为“特殊子集”,含元素个数最多的特殊子集称为“超特殊子集”. 求超特殊子集含有多少个元素,且存在多少个不同的超特殊子集?
\end{example}

\begin{analysis}
一个自然的想法是, 先列出集合 $\{1,2, \cdots, 50\}$ 的所有仅包含形如 $\left\{x, 3^{k} x\right\}\left(k \in \mathbf{N}^{*}\right)$ 的二元子集且元素尽可能多的子集,以及 $\{1,2, \cdots, 50\}$\\
除去上述复合元素后余下元素构成的子集, 然后考虑如何从这些子集中选取元素组成超“特殊子集”.
\end{analysis}
\begin{solution}
作集合 $\{1,2, \cdots, 50\}$ 的子集：
$$
\begin{aligned}
& E_{1}=\{1,3,9,27\} ; \quad E_{2}=\{2,6,18\}, \quad E_{3}=\{4,12,36\}, \\
& E_{4}=\{5,15,45\} ; \quad E_{5}=\{7,21\}, \quad E_{6}=\{8,24\}, \\
& E_{7}=\{10,30\}, \quad E_{8}=\{11,33\}, \quad E_{9}=\{13,39\}, \\
& E_{10}=\{14,42\}, \quad E_{11}=\{16,48\} ; \\
& E_{12}=\{17,19,20,22,23,25,26,28,29,31,32,34,35,37,38, \\
&40,41,43,44,46,47,49,50\} .
\end{aligned}
$$

显然,这些集合两两的交集为空集，它们的并集恰为集合 $\{1,2, \cdots, 50\}$.

超特殊子集可以从集合 $E_{1} ,  E_{2} ,  E_{3} ,  E_{4}$ 中各选两个元素, 同一个集合中选取的两个数没有一个是另一个的 3 倍; 从 $E_{5}, E_{6}, \cdots, E_{11}$ 中各取一个元素;取集合 $E_{12}$ 的全部元素. 故超特殊子集最多含有 $2 \times 4+7+23=38$ (个) 元素.

因为从 $E_{1}$ 中选取两个元素的方法有 3 种; 从 $E_{2} ,  E_{3} ,  E_{4}$ 中各选取两个元素的方法和从 $E_{12}$ 中选取全部元素的方法各只有 1 种; 从 $E_{5}, E_{6}, \cdots, E_{11}$ 中各选取一个元素的方法各有 2 种, 所以, 共有 $3 \times 2^{7}=384$ (个)不同的超特殊子集.

如果 $A ,  B$ 是两个相等的数集, 那么可以得到 $A=B$ 的两个非常有用的必要条件:

(1) 两个集合的元素之和相等;

(2) 两个集合的元素之积相等.
\end{solution}

\begin{example}
设 $a ,  b ,  c$ 是互不相同的正整数, $n$ 为正整数. 若集合

$$
\{a+b, b+c, c+a\}=\left\{n^{2},(n+1)^{2},(n+2)^{2}\right\}
$$

求 $a^{2}+b^{2}+c^{2}$ 的最小值.
\end{example}

\begin{solution}
由题设, 显然 $n>1$. 由于

$$
n^{2}+(n+1)^{2}+(n+2)^{2}=2(a+b+c)
$$

这是一个偶数, 故 $n ,  n+1 ,  n+2$ 中有两个奇数, 一个偶数, 所以 $n$ 为奇数.

不妨设 $a<b<c$.

当 $n=3$ 时, 由 $a+b=9, a+c=16, b+c=25$ 得 $a+b+c=25$, 从而 $a=0$, 与题设矛盾. 所以 $n \geqslant 5$.\\
当 $n=5$ 时, 由 $a+b=25, a+c=36, b+c=49$ 解得 $a=6, b=19$, $c=30$. 这时, $a^{2}+b^{2}+c^{2}=1297$.

综上,所求 $a^{2}+b^{2}+c^{2}$ 的最小值为 1297 .
\end{solution}

\begin{note}
	元素之和(积)相等只是两个集合相等的必要条件,以此求解集合时一般还要检查集合的元素是否互异.
\end{note}

\begin{example}\label{ex:6}
对于非空数集 $S ,  T$, 定义

$$
S+T=\{s+t \mid s \in S, t \in T\}, 2 S=\{2 s \mid s \in S\}
$$

设 $n$ 为正整数, $A ,  B$ 均为 $\{1,2, \cdots, n\}$ 的非空子集, 证明: 存在 $A+B$ 的子集 $D$, 使得

$$
D+D \subseteq 2(A+B), \text { 且 }|D| \geqslant \frac{|A| \cdot|B|}{2 n}
$$

这里 $|X|$ 表示有限集 $X$ 的元素个数.
\end{example}

\begin{proof}
令 $S_{y}=\{(a, b) \mid a-b=y, a \in A, b \in B\}$.

由于 $\sum_{y=1-n}^{n-1}\left|S_{y}\right|=|A| \cdot|B|$, 故存在 $y_{0}, 1-n \leqslant y_{0} \leqslant n-1$, 使

$$
\left|S_{y_{0}}\right| \geqslant \frac{|A| \cdot|B|}{2 n-1}>\frac{|A| \cdot|B|}{2 n}
$$

取 $D=\left\{2 b+y_{0} \mid(a, b) \in S_{y_{0}}\right\}$, 由于对所有的 $(a, b) \in S_{y_{0}}$, 相应的 $b$值两两不等, 进而 $2 b+y_{0}$ 两两不同, 故

$$
|D|=\left|S_{y_{0}}\right|>\frac{|A| \cdot|B|}{2 n}
$$

由 $S_{y_{0}}$ 的定义知, 对 $D$ 中的每个元素 $d$, 存在 $(a, b) \in S_{y_{0}}$ 使得

$$
d=2 b+y_{0}=a+b \in A+B
$$

故 $D \subseteq A+B$.

对 $d_{1}, d_{2} \in D$, 设 $d_{1}=2 b_{1}+y_{0}=2 a_{1}-y_{0}, d_{2}=2 b_{2}+y_{0}\left(b_{1}, b_{2} \in B\right.$, $\left.a_{1} \in A\right)$, 则

$$
\begin{aligned}
d_{1}+d_{2} & =2 a_{1}-y_{0}+2 b_{2}+y_{0} \\
& =2\left(a_{1}+b_{2}\right) \in 2(A+B)
\end{aligned}
$$

综上可知集合 $D$ 满足要求.
\end{proof}

\begin{note}
例 \ref{ex:6}定义了一种新的集合运算, 正确理解这个定义是顺利解题的关键.
\end{note}

\begin{example}
用 $\sigma(S)$ 表示非空的整数集合 $S$ 的所有元素的和. 设 $A=\left\{a_{1}\right.$, $\left.a_{2}, \cdots, a_{11}\right\}$ 是正整数的集合, 且 $a_{1}<a_{2}<\cdots<a_{11}$; 又设对每个正整数 $n \leqslant$ 1500 , 都存在 $A$ 的子集 $S$, 使得 $\sigma(S)=n$. 求 $a_{10}$ 的最小可能值.
\end{example}

\begin{analysis}
要求 $a_{10}$ 的最小值, 显然应使 $\sigma(A)=1500$. 又由题设,应使 $a_{11}$ 尽可能大, 且前 10 个数之和不小于 750 , 故取 $a_{11}=750$. 考虑整数的二进制表示, 由 $1+2+\cdots+2^{7}=255$ 知, 前 8 个数应依次为 $1 ,  2 ,  4 ,  8 ,  16 ,  32 ,  64 ,  128$. 这时 $a_{9}+a_{10}=495$, 从而有 $a_{10}=248$.
\end{analysis}

\begin{solution}
取 $A_{0}=\{1,2,4,8,16,32,64,128,247,248,750\}$, 易知 $A_{0}$ 满足题目要求, 且 $a_{10}=248$. 故 $a_{10}$ 的最小可能值不超过 248 .

另一方面, $a_{10}$ 不可能比 248 更小. 这是因为前 10 个数之和不能小于 750 ,否则设 $\sum_{i=1}^{10} a_{i}=m, m<750$, 则 $a_{11}=1500-m$, 对 $n \in(m, 1500-m)$, 显然不存在 $A$ 的子集 $S$, 使 $\sigma(S)=n$. 因 $1+2+\cdots+2^{7}=255$, 由整数的二进制表示知, 其前 8 个数之和最大为 255. 故 $a_{9}+a_{10}$ 的最小可能值为 495 , 从而 $a_{10}$至少为 248.

综上知, $a_{10}$ 的最小可能值为 248 .
\end{solution}

\begin{note}
本例采用了构造法. 直接构造一个符合题设的 $A_{0}$, 然后证明 $A_{0}$ 具有所要求的性质. 这种方法在解有关集合和组合的问题中经常用到.
\end{note}

\begin{example}
设 $A_{1}, A_{2}, A_{3}, \cdots$ 是一列集合, 满足:对任意正整数 $j$, 只有有限多个正整数 $i$, 使得 $A_{i} \subseteq A_{j}$. 证明: 存在一列正整数 $a_{1}, a_{2}, a_{3}, \cdots$, 使得对任意正整数 $i ,  j, a_{i} \mid a_{j}$ 当且仅当 $A_{i} \subseteq A_{j}$.
\end{example}
\begin{proof}
设 $p_{1}, p_{2}, p_{3}, \cdots$ 是全体素数从小到大排列. 对 $i \in \mathbf{N}^{*}$, 记 $S_{i}=$ $\left\{j \in \mathbf{N}^{*} \mid A_{j} \subseteq A_{i}\right\}$, 由题设知 $S_{i}$ 是有限集, 且 $i \in S_{i}$. 令 $a_{i}=\prod_{j \in S_{i}} p_{j}$, 下面证明数列 $a_{1}, a_{2}, a_{3}, \cdots$ 满足条件.

对任意正整数 $i ,  j$, 若 $A_{i} \subseteq A_{j}$, 则 $S_{i} \subseteq S_{j}$, 从而 $a_{i} \mid a_{j}$; 若 $a_{i} \mid a_{j}$, 则 $S_{i} \subseteq$ $S_{j}$, 由 $i \in S_{i}$ 可知 $i \in S_{j}$, 故 $A_{i} \subseteq A_{j}$. 因此 $a_{i} \mid a_{j}$ 当且仅当 $A_{i} \subseteq A_{j}$.
\end{proof}

\subsection{集合语言与集合方法}
集合不仅是一个独立的数学分支,而且还为其他数学领域提供了基本的语言和重要的方法.
\begin{example}
	某地区网球俱乐部的 20 名成员举行 14 场单打比赛,每人至少上场一次. 求证: 必有六场比赛, 其 12 个参赛者各不相同.
\end{example}
\begin{proof}
记参加第 $j$ 场比赛的选手为 $\left(a_{j}, b_{j}\right)$, 并记

$$
S=\left\{\left(a_{j}, b_{j}\right) \mid j=1,2, \cdots, 14\right\}
$$

设 $M$ 为 $S$ 的一个子集. 如果 $M$ 中所含选手对中出现的选手互不相同,则称 $M$ 为 $S$ 的一个“好”子集.

显然,这样的“好”子集只有有限个, 其中必有一个元素最多的, 设这个元素最多的“好”子集为 $M_{0}$, 它的元素个数为 $r$, 显然只需证明 $r \geqslant 6$.

如果 $r \leqslant 5$, 由于 $M_{0}$ 是元素个数最多的“好”子集, 所以在 $M_{0}$ 中未出现过的 $20-2 r$ 名选手之间互相没有比赛, 否则与 $M_{0}$ 的最大性矛盾. 这就意味着,这 20- $2 r$ 名选手所参加的比赛一定是同前 $2 r$ 名选手进行的.

由于每名选手至少参加一场比赛, 所以除了 $M_{0}$ 中的 $r$ 场比赛之外, 至少还要进行 $20-2 r$ 场比赛.

因此,总比赛场数至少为

$$
r+20-2 r=20-r \geqslant 15
$$

与总比赛场次为 14 场矛盾.

于是 $r \geqslant 6$. 问题得证.
\end{proof}

\begin{example}
设 $S$ 是由 $2 n$ 个人组成的集合. 求证: 其中必定有两个人,他们的公共朋友的个数为偶数.
\end{example}
\begin{proof}
用反证法: 设 $S$ 为一个由 $2 n$ 个人组成的集合, $S$ 中每两个人的公共朋友数为奇数.

对 $S$ 中的任意一个人 $A$, 记 $M=\left\{F_{1}, F_{2}, \cdots, F_{k}\right\}$ 为 $A$ 的朋友集, 可以证明: 对每个 $A, k$ 都为偶数.

事实上, 对每个 $F_{i} \in M$, 考虑他在 $M$ 中的朋友数, 所有这 $k$ 个 $F_{i}$ 的这些朋友数之和为偶数 (因为朋友是相互的), 而对 $A 、 F_{i}$ 而言, 其公共朋友数为奇数, 故每个 $F_{i}$ 的这样的朋友数为奇数, 故 $k$ 为偶数.

设 $k=2 m$, 现在考虑每个 $F_{i} \in M$, 他的所有朋友集不包括 $A$, 但不局限于 $M$ 中, 他的这样的朋友数为奇数 (因为 $F_{i}$ 的朋友数为偶数, 而 $A$ 不算在内). 因此, 所有 $2 m$ 个这样的朋友集的元素个数之和为偶数. 从而在 $2 n-1$ 个人 ( $A$ 除外)中, 必有一个人在偶数个这样的朋友集中出现, 他与 $A$ 的公共朋友数为偶数.

这个矛盾表明: 有两个 $S$ 中的人,他们的公共朋友数为偶数.
\end{proof}

\begin{note}
上述解法采用了奇偶性分析来“制造”矛盾.
\end{note}

\section{集合的运算}
\section{有限集的阶}
\section{子集族}
\section{集合的性质}
\section{集合中的最大(小)值}
\section{集合的分划}
\section{分类原则}
\section{极端原理}
\section{ 容斥原理}
\section{ 映射方法}